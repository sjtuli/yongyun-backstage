"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue-demi"),t=require("echarts/core"),n=require("resize-detector"),o=function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];var i={autoresize:Boolean};var a={loading:Boolean,loadingOptions:Object};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}("x-vue-echarts{display:block;width:100%;height:100%}");var u=/^on[^a-z]/,c=function(e){return u.test(e)};e.Vue2&&e.Vue2.config.ignoredElements.push("x-vue-echarts");var s=e.defineComponent({name:"echarts",props:o(o({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},i),a),inheritAttrs:!1,setup:function(i,a){var u=a.attrs,s=a.listeners,l=e.ref(),f=e.shallowRef(),p=e.shallowRef(),d=e.inject("ecTheme",null),v=e.inject("ecInitOptions",null),h=e.inject("ecUpdateOptions",null),O=e.computed((function(){return p.value||i.option||Object.create(null)})),g=e.computed((function(){return i.theme||e.unref(d)||{}})),m=e.computed((function(){return i.initOptions||e.unref(v)||{}})),E=e.computed((function(){return i.updateOptions||e.unref(h)||{}})),j=e.toRefs(i),x=j.autoresize,y=j.manualUpdate,w=j.loading,L=e.toRef(i,"theme"),b=e.toRef(i,"initOptions"),T=e.toRef(i,"loadingOptions"),U=e.computed((function(){return function(e){var t={};for(var n in e)c(n)||(t[n]=e[n]);return t}(u)}));function C(n){if(!f.value&&l.value){var o=f.value=t.init(l.value,g.value,m.value);i.group&&(o.group=i.group);var r=s;r||(r={},Object.keys(u).filter((function(e){return 0===e.indexOf("on")&&e.length>2})).forEach((function(e){var t=e.charAt(2).toLowerCase()+e.slice(3);r[t]=u[e]}))),Object.keys(r).forEach((function(e){var t=r[e];t&&(0===e.indexOf("zr:")?o.getZr().on(e.slice(3).toLowerCase(),t):o.on(e.toLowerCase(),t))})),o.setOption(n||O.value,E.value),e.nextTick(a),setTimeout(a)}function a(){o&&!o.isDisposed()&&o.resize()}}function D(){f.value&&(f.value.dispose(),f.value=void 0)}var R=null;e.watch(y,(function(t){"function"==typeof R&&(R(),R=null),t||(R=e.watch((function(){return i.option}),(function(e){e&&(f.value?f.value.setOption(e,E.value):C())}),{deep:!0}))}),{immediate:!0}),e.watch([L,b],(function(){D(),C()}),{deep:!0}),e.watchEffect((function(){i.group&&f.value&&(f.value.group=i.group)}));var z=function(e,t){function n(n){return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(e.value||t(),!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,o)}}function i(e){return n(e)}return o(o({},(a=Object.create(null),r.forEach((function(e){a[e]=n(e)})),a)),{dispatchAction:i("dispatchAction"),getDataURL:i("getDataURL"),getConnectedDataURL:i("getConnectedDataURL")});var a}(f,C);!function(t,n,r){var i=e.inject("ecLoadingOptions",{}),a=e.computed((function(){return o(o({},e.unref(i)),null==r?void 0:r.value)}));e.watchEffect((function(){var e=t.value;e&&(n.value?e.showLoading(a.value):e.hideLoading())}))}(f,w,T),function(o,r,i,a){var u=null,c=0;function s(){var e=i.value;return e?e.offsetWidth*e.offsetHeight:0}e.watch([i,o,r],(function(e,o,r){var i=e[0],l=e[1],f=e[2];i&&l&&f&&(c=s(),u=t.throttle((function(){0===c?(l.setOption(Object.create(null),!0),l.resize(),l.setOption(a.value,!0)):l.resize(),c=s()}),100),n.addListener(i,u)),r((function(){u&&i&&(c=0,n.removeListener(i,u))}))}))}(f,x,l,O),e.onMounted((function(){i.option&&C()})),e.onUnmounted(D);var A=o({root:l,setOption:function(e,t){i.manualUpdate&&(p.value=e),f.value?f.value.setOption(e,t||{}):C(e)},nonEventAttrs:U},z);return Object.defineProperty(A,"chart",{get:function(){return e.unref(f)}}),A},render:function(){var t=o({},this.nonEventAttrs);return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",e.h("x-vue-echarts",t)}});exports.INIT_OPTIONS_KEY="ecInitOptions",exports.LOADING_OPTIONS_KEY="ecLoadingOptions",exports.THEME_KEY="ecTheme",exports.UPDATE_OPTIONS_KEY="ecUpdateOptions",exports.default=s;
//# sourceMappingURL=index.cjs.min.js.map
